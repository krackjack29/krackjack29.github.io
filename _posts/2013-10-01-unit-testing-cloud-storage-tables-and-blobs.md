title: Unit Testing Cloud Storage (Tables and Blobs)
link: https://pratapgowda.wordpress.com/2013/10/01/unit-testing-cloud-storage-tables-and-blobs/
author: pratapgowda
description: 
post_id: 123
created: 2013/10/01 13:41:00
created_gmt: 2013/10/01 08:11:00
comment_status: open
post_name: unit-testing-cloud-storage-tables-and-blobs
status: publish
post_type: post

# Unit Testing Cloud Storage (Tables and Blobs)

<blockquote>   <p>“Without valid unit tests any code that's written has no value as its not verifiable. And if your code isn't testable (unit) there is a major design flaw that you would regret in not so far future. “</p> </blockquote>  <p>Ok those were the things i learnt over a period of years when i wasn't writing unit tests <img class="wlEmoticon wlEmoticon-smile" style="border-style:none;" alt="Smile" src="http://pratapgowda.files.wordpress.com/2013/10/wlemoticon-smile.png" /> . Yes unit testing is important and how do we test the code that stores, loads and manipulates data from data-source esp. in our case Azure Storage (table and blobs).</p>  <p>There are ways to stub the storage services, one would be to write a new in-memory stub which provides all the APIs that Azure would provide , but that would be time consuming and who would write unit tests for those heavy stubs ?</p>  <p>Instead Microsoft along with SDKs gives you the emulators for storage and computing which we can use them for the unit testing. </p>  <p>While unit testing we would want our emulator to be running and&#160; reset based on the structuring of the unit tests, two approaches would be to reset storage for each fixture of unit test or reset them for each unit test.</p>  <p>There are few attributes out there in Microsoft.VisualStudio.TestTools.UnitTesting namespace which are very useful in these type of scenarios.</p>  <table cellspacing="0" cellpadding="2" width="400" border="0"><tbody>     <tr>       <td valign="top" width="10"><strong>Attribute</strong></td>        <td valign="top" width="201"><strong>Description</strong></td>        <td valign="top" width="189"><strong>Signature of methods</strong>&#160; Within a TestClass</td>     </tr>      <tr>       <td valign="top" width="10">AssemblyInitializeAttribute</td>        <td valign="top" width="201">Called before the tests in an assembly is loaded</td>        <td valign="top" width="189">         <p>public static void MethodName(TestContext context)</p>       </td>     </tr>      <tr>       <td valign="top" width="10">AssemblyCleanupAttribute</td>        <td valign="top" width="201">Called after the tests in an assembly is completed its execution</td>        <td valign="top" width="189">public static void MethodName() </td>     </tr>      <tr>       <td valign="top" width="10">ClassInitializeAttribute</td>        <td valign="top" width="201">Called before tests in a TestClass is loaded</td>        <td valign="top" width="189">public static void MethodName(TestContext context) </td>     </tr>      <tr>       <td valign="top" width="10">ClassCleanupAttribute</td>        <td valign="top" width="201">Called after tests in a TestClass is completed</td>        <td valign="top" width="189">public static void MethodName() </td>     </tr>      <tr>       <td valign="top" width="10">TestInitializeAttribute</td>        <td valign="top" width="201">Called before executing each test</td>        <td valign="top" width="189">public void MethodName()</td>     </tr>      <tr>       <td valign="top" width="10">TestCleanupAttribute</td>        <td valign="top" width="201">Called after executing each test</td>        <td valign="top" width="189">public void MethodName()</td>     </tr>   </tbody></table>  <p>My way of unit testing was that i assume my TestClass would need a clean storage and i clean (reset) the storage one all the tests in my class is complete.</p>  <p>   <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:9bb7a4c0-ee95-4aed-ba21-5d3011747fed" class="wlWriterEditableSmartContent" style="float:none;margin:0;display:inline;padding:0;"><pre style="width:576px;height:403px;background-color:White;overflow:auto;"><div><span style="color:#000000;">[ClassInitialize